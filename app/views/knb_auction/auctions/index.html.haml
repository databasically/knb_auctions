= render :partial => "knb_auction/application/auction_engine"

%h1.title Auctions

- @auctions.each do |auction|
  %ol.auction-list
    %li.auction
      .status-label
        - status_label(auction.status) {auction.status.to_s.upcase}
      - if current_user.admin?
        %table.admin-menu
          %tr
            %td= link_to 'Details', auction
            %td= link_to 'Edit', edit_auction_path(auction)
            %td= button_to "Delete", auction, :method=>:delete, :class=>:destroy,:confirm=>"Are you sure?"
      %table.auction-item
        %tr
          %td.product-image{style: "width: 60px; height:60px;"}
          %td.product-name
            .name= link_to auction.product_name, auction
          -if auction.active?
            %td.time-left
              = auction_time_left( auction )
              .time-left-label="left to bid"
          %td.high-bid-info
            .high-bid= "#{auction.high_bid.goodles} G"
            .high-bidder= link_to bid_owner_name( auction ), main_app.user_path(auction.high_bidder)
          -if auction.active?
            %td.bid-button= link_to 'Bid', new_auction_bid_path(auction)


- if current_user.admin?
  %br
  .actions
    = link_to 'Create a new Auction', new_auction_path
